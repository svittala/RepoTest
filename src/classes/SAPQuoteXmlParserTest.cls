@isTest
public with sharing class SAPQuoteXmlParserTest {
    @isTest
    private static void parseQuoteXmlTest() {    	
    	String xmlString = '<data xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"><SLS_PRT_COM><HEAD_DETAIL><VBDKA><LAND1>IT</LAND1><KUNNR>1059261</KUNNR><VKORG>9006</VKORG><VBELN>8620000002</VBELN><AUDAT>2017-07-27</AUDAT><BSTDK>2017-07-27</BSTDK><IHREZ></IHREZ><BNAME></BNAME><VBELN_VANG></VBELN_VANG><VBTYP_VANG></VBTYP_VANG><AUDAT_VANG></AUDAT_VANG><VSBED_BEZ>Camion</VSBED_BEZ><INCO1>DAP</INCO1><INCO2>reso al luogo destinazione</INCO2><LFDAT>01.08.2017</LFDAT><DATBEZ>Day</DATBEZ><BRGEW>289</BRGEW><NTGEW>289</NTGEW><GEWEI>KG</GEWEI><VOLUM>0.000</VOLUM><VOLEH></VOLEH><WAERK>EUR</WAERK><NETWR>5432.25</NETWR><VBTYP>B</VBTYP><ANGDT>2017-07-27</ANGDT><BNDDT>2017-08-27</BNDDT><GUEBG></GUEBG><GUEEN></GUEEN><AUGRU></AUGRU><LIFSK></LIFSK><VBKLT></VBKLT><BSTKD>crm test</BSTKD><ZZSUPOS>5274.75</ZZSUPOS><VTEXT></VTEXT><ZZEIKTO></ZZEIKTO><SUPOS>0.00</SUPOS><INCOV></INCOV><INCO2_L></INCO2_L><INCO3_L></INCO3_L><INCO2_L_LBL></INCO2_L_LBL><INCO3_L_LBL></INCO3_L_LBL><BSTOB></BSTOB></VBDKA><CONDITIONS><DATA xfa:dataNode="dataGroup"><KSCHL>ZFZI</KSCHL><KAWRT>5250.00</KAWRT><KBETR>3.000</KBETR><KOEIN>%</KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>157.50</KWERT><VTEXT>Contr.Trasp. (%)</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0E-14</KAQTY></DATA><DATA xfa:dataNode="dataGroup"><KSCHL>MWST</KSCHL><KAWRT>5432.25</KAWRT><KBETR>22.000</KBETR><KOEIN>%</KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>1195.10</KWERT><VTEXT>IVA vendite</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0E-14</KAQTY></DATA></CONDITIONS><TVKO/><REPEAT></REPEAT><LOGO_URL></LOGO_URL><GROSS_VALUE>6627.35</GROSS_VALUE><EX_CANCELLATION_DATES></EX_CANCELLATION_DATES><VEDKA><VBEGDAT></VBEGDAT><BEZEI_BEG></BEZEI_BEG><VENDDAT></VENDDAT></VEDKA><VBTYP_TEXT>Offerta</VBTYP_TEXT><VBTYP_VANG_TEXT></VBTYP_VANG_TEXT><ZZPERSONNEL_ID><ZZNAME1>BIZZI MAURIZIO</ZZNAME1><ZZTELF1>+39 0444 607913</ZZTELF1><ZZTELF2>+39 0444 607965</ZZTELF2><ZZTELFX></ZZTELFX><ZZEMAIL>maurizio.bizzi@it.enersys.com</ZZEMAIL></ZZPERSONNEL_ID><ZZPERSONNEL_VE><ZZNAME1>CRISTIAN SAGGIORATO</ZZNAME1><ZZTELF1>+39 333 6826814</ZZTELF1><ZZTELF2></ZZTELF2><ZZTELFX></ZZTELFX><ZZEMAIL>cristian.saggiorato@it.enersys.com</ZZEMAIL></ZZPERSONNEL_VE><ZZPARTNER_AP><ZZNAME1></ZZNAME1></ZZPARTNER_AP><ZZEX_SPEED></ZZEX_SPEED><ZZWORK_ORDER></ZZWORK_ORDER><ZZCOPY></ZZCOPY><ZZPARTNER_ZU></ZZPARTNER_ZU><FOOTER_TEXT xfa:contentType="text/html"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;" xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div style="tab-stops :  left 6cm left 13.50cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; font-weight : bold ;">Enersys Srl</span><span style="xfa-tab-count : 1 ;"/>partita IVA 00841770332 R.E.A. 313103 cod. fisc. e iscr. Reg.</div><div style="tab-stops :  left 6cm left 13.50cm ;">Viale Europa 5<span style="xfa-tab-count : 1 ;"/>Imp. 00679450197 Capitale Sociale i.v. Euro 2.216.312,00</div><div style="tab-stops :  left 6cm left 13.50cm ;">36053 Gambellara (VI)<span style="xfa-tab-count : 1 ;"/><span style="xfa-spacerun:yes">Iscritta al Reg. AEE  IT17040000009824</span></div><div style="tab-stops :  left 6cm left 13.50cm ;">Italy <span style="xfa-tab-count : 1 ;"/>Iscritta al Reg. Naz. Pile e Accumulatori con Numero</div><div style="tab-stops :  left 6cm left 13.50cm ;">Tel: 0444/607811<span style="xfa-tab-count : 1 ;"/>IT09060P00001048</div><div style="tab-stops :  left 6cm left 13.50cm ;">Fax: 0444/607911</div><div style="tab-stops :  left 6cm left 13.50cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; color : #0000FF ;">www.enersys.com</span><span style="xfa-spacerun:yes"> </span><br/></div></div></FOOTER_TEXT><CUSTOMER_ADDRESS>Ditta VIACAR SRLVIA DELL\'ARTIGIANATO 11/13 36030 POVOLARO DI DUEVILLE  VI</CUSTOMER_ADDRESS><OUR_ADDRESS xfa:contentType="text/html"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;" xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div style="tab-stops :  left 6cm left 13.50cm ;">EnerSys Srl</div><div style="tab-stops :  left 6cm left 13.50cm ;">Viale Europa, 3 - 36053 Gambellara (VI) - ITALY</div><div style="tab-stops :  left 6cm left 13.50cm ;"><span style="xfa-spacerun:yes">Tel. +39 0444/607811   Fax +39 0444/607911 - www.enersys.com</span></div><div style="tab-stops :  left 6cm left 13.50cm ;">Part. IVA 00841770332 R.E.A. 313103</div><div style="tab-stops :  left 6cm left 13.50cm ;">Cod. Fisc. e. iscr.Reg.Imp.00679450197 Cap.Soc. i.v. Euro 2.216.312,00</div><div style="tab-stops :  left 6cm left 13.50cm ;"><span style="xfa-spacerun:yes">Iscritta al Reg. AEE  IT17040000009824</span></div><div style="tab-stops :  left 6cm left 13.50cm ;">Iscritta al Reg.Naz. Pile e Accumulatori al Numero IT09060P00001048</div></div></OUR_ADDRESS><TOP_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></TOP_TEXT_DYNAMIC><TOP_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div><span style="xfa-spacerun:yes"> </span><br/></div></div></TOP_TEXT><BOTTOM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div><span style="xfa-spacerun:yes"> </span><br/></div></div></BOTTOM_TEXT_DYNAMIC><BOTTOM_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div><span style="xfa-spacerun:yes"> </span><br/></div></div></BOTTOM_TEXT><PAYMENT_TERMS_ALTERNATIVE><TRUE xfa:dataNode="dataGroup"><ZTERM_TX1>RIBA 120 GG FM</ZTERM_TX1><ZTERM_TX2></ZTERM_TX2><ZTERM_TX3></ZTERM_TX3></TRUE></PAYMENT_TERMS_ALTERNATIVE><TERMS_CONDITIONS xfa:contentType="text/html"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;" xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div style="tab-stops :  left 6cm left 13.50cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; font-weight : bold ;">CONDIZIONI GENERALI DI VENDITA</span><span style="xfa-spacerun:yes"> – I prezzi si intendono per merce franco fabbrica, al netto di imposte, tasse e spese di trasporto e possono da noi essere variati senza alcun preavviso. I pagamenti dovranno essere effettuati direttamente alla ns. sede di Gambellara (VI), salvo diverso accordo. Per ritardati pagamenti maturerà un interesse di mora come da D.lgs. n. 231/2002 e successive modificazioni. In caso di insolvenza la Enersys s.r.l. si riserva la facoltà di recedere dal contratto e/o di sospendere l’esecuzione, senza pregiudizio di altro suo diritto. Eventuali spese relative a ricevute bancarie, tratte e contrassegni sono a carico esclusivo del Cliente. La consegna della merce si intende eseguita al momento e nel luogo dell’uscita dei prodotti dal ns. magazzino o dai depositi periferici., cessando ogni responsabilità del venditore sugli stessi. Eventuali danni o ammanchi dovranno venire contestati al vettore al momento del ricevimento della merce. I prodotti venduti sono idonei per l’uso al quale sono destinati e garantiti da difetti di qualità e fabbricazione. Per ogni controversia è competente il foro di Vicenza. Ai sensi del D.lgs. 198/2003 – Privacy- L\'informativa completa è a vs. disposizione sul sito </span><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; color : #0000FF ;">http://www.enersys-emea.com/reserve/local_infos/PrivacyItaly.asp</span><span style="xfa-spacerun:yes"> Contributo ambiente CONAI assolto ove dovuto.</span></div><div style="tab-stops :  left 6cm left 13.50cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; font-weight : bold ;">Enersys ha adottato un Modello di organizzazione e gestione ai sensi del Decreto Legislativo. 231/01 ed un Codice Etico, quale documento che definisce l’insieme dei valori di etica aziendale che la Società riconosce, accetta e condivide e il cui rispetto consente, fra l’altro, di prevenire la commissione di reati previsti dal Decreto citato. Il Codice Etico può essere richiesto in forma cartacea o elettronica a</span><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; color : #0000FF ;"><span style="xfa-spacerun:yes"> odv.enersys@gmail.com</span></span><span style="xfa-spacerun:yes"> </span><br/></div></div></TERMS_CONDITIONS><VERY_LAST_TEXTS xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></VERY_LAST_TEXTS></HEAD_DETAIL><ITEM_DETAIL><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000010</POSNR><UEPOS>000000</UEPOS><POSEX></POSEX><MATNR>4592452CBC</MATNR><IDNKD></IDNKD><ARKTX>N 24V 3PZM375 BAT CHRG RAL9005</ARKTX><CHARG></CHARG><PSTYV>AGC</PSTYV><NETWR>5432.25</NETWR><KWMENG>1.000</KWMENG><VRKME>PC</VRKME><VBELN_VANG></VBELN_VANG><AUDAT_VANG></AUDAT_VANG><INCO1></INCO1><INCO2></INCO2><ABGRU></ABGRU><BMENG>1.000</BMENG><DATBEZ>Day</DATBEZ><BSTKD></BSTKD><BSTKD_E></BSTKD_E><POSEX_E></POSEX_E><VGBEL></VGBEL><VGPOS>000000</VGPOS><ACTIVITY_TYPE></ACTIVITY_TYPE><ZZSTAWN></ZZSTAWN><ZZZEINR>9936_50003_00_H</ZZZEINR><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT></ZZWEIUNIT><ZZDIMENSIONS>621 mm x 281 mm x 610 mm</ZZDIMENSIONS><ZZBRAND></ZZBRAND><ZZCHARG_PROFILE></ZZCHARG_PROFILE><ZZDIMENSIONS_2></ZZDIMENSIONS_2><ZZ_ATEX></ZZ_ATEX><ZZMAT_DIMENSION></ZZMAT_DIMENSION><SGT_RCAT></SGT_RCAT><INCOV></INCOV><INCO2_L></INCO2_L><INCO3_L></INCO3_L><INCO2_L_LBL></INCO2_L_LBL><INCO3_L_LBL></INCO3_L_LBL><BSTOB></BSTOB></VBDPA><CONDITIONS><DATA xfa:dataNode="dataGroup"><KBETR>5.000</KBETR><KOEIN>%</KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>250.00</KWERT><VTEXT>Adeguamento MatPrime</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0E-14</KAQTY></DATA><DATA xfa:dataNode="dataGroup"><KBETR>0.00</KBETR><KOEIN></KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>24.75</KWERT><VTEXT>Costo ex Dlgs 188/08</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0E-14</KAQTY></DATA></CONDITIONS><EX_CONDITIONS>X</EX_CONDITIONS><EX_BILL_PLAN></EX_BILL_PLAN><EX_SUB_ITEMS></EX_SUB_ITEMS><EX_CONFIGURATION>X</EX_CONFIGURATION><EX_SCHEDULE_LINES></EX_SCHEDULE_LINES><EX_SERIALS></EX_SERIALS><VEDPA><VBEGDAT></VBEGDAT><BEZEI_BEG></BEZEI_BEG><VENDDAT></VENDDAT></VEDPA><EX_CANCELLATION_DATES></EX_CANCELLATION_DATES><VBTYP_VANG_TEXT></VBTYP_VANG_TEXT><CORRECTION_TEXT></CORRECTION_TEXT><BILL_PLAN_PERIODIC><BEDAT></BEDAT><ENDAT></ENDAT><BETXT></BETXT><ENTXT></ENTXT><PETXT></PETXT><PEROP_BEG></PEROP_BEG><PEROP_END></PEROP_END></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>5000.00</KBETR><KOEIN>EUR</KOEIN><KPEIN>1</KPEIN><KMEIN>PC</KMEIN><KWERT>5000.00</KWERT><VTEXT>Netto posizione</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0</KAQTY></ZZNET_PRICE><ZZCONFIGURATION_CBC><DATA xfa:dataNode="dataGroup"><ATBEZ>Aquamatic:</ATBEZ><VALUE>Si</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>VHB_F_AQUAMATIC</ATNAM><OR_VALUE>Si</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Blinky:</ATBEZ><VALUE>ACC-SWM3-SRCD5</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_LEV_TYPE</ATNAM><OR_VALUE>ACC-SWM3-SRCD5</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Brand:</ATBEZ><VALUE>FMP</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_BRAND</ATNAM><OR_VALUE>FMP</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Opzioni Extra Materiale:</ATBEZ><VALUE>FUSTO RABBOCCATORE BFS/AQUAMATIC</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>MATNR_OPT_1</ATNAM><OR_VALUE>4476444</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Numero Cassoni:</ATBEZ><VALUE>1</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_TROGANZAHL</ATNAM><OR_VALUE>1</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Peso operativo Batteria:</ATBEZ><VALUE>289,00 kg</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>VHB_F_GEWICHT</ATNAM><OR_VALUE>289,00 kg</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>EU Stock:</ATBEZ><VALUE>N</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_EUSTOCK</ATNAM><OR_VALUE>N</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>FR_STOCK:</ATBEZ><VALUE>N</VALUE><VBELN>8620000002</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>FR_STOCK</ATNAM><OR_VALUE>N</OR_VALUE></DATA></ZZCONFIGURATION_CBC><ZZEX_CONFIGURATION_CBC>X</ZZEX_CONFIGURATION_CBC><ZZEX_CBTEXT></ZZEX_CBTEXT><ZZWORK_ORDER_AUFNR></ZZWORK_ORDER_AUFNR><ZZWORK_ORDER_WADAT></ZZWORK_ORDER_WADAT><ZZHIDE></ZZHIDE><ZZMULTI_SUBITEMS></ZZMULTI_SUBITEMS><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup"/></ITEM_ZTERM_ALTERNATIVE><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ABOVE_ITEM_TEXT_DENAMIC></DATA></ITEM_DETAIL><GV_LANG>IT</GV_LANG></SLS_PRT_COM><GV_SYSID>C01</GV_SYSID><GV_DATE>2017-08-04</GV_DATE><VBTYP></VBTYP><ZS_EXTRADATA><EIKTO></EIKTO><SALESDOCTYPE></SALESDOCTYPE><DOCLANGUAGE></DOCLANGUAGE><VTWEG></VTWEG><SPART></SPART></ZS_EXTRADATA><USERNAME>MARFIL</USERNAME></data>';
    	
    	SAPQuoteXmlParser parser = new SAPQuoteXmlParser(xmlString);
    	
    	Test.startTest();
    	
    	SAPQuoteXmlParser.SAPQuoteDocument quoteDoc = parser.parse();
    	
    	Test.stopTest();
    	
    	System.assertEquals('EUR', quoteDoc.currencyISOCode);
    	System.assertEquals(5274.75, quoteDoc.value);
    	System.assertEquals(6627.35, quoteDoc.grossValue);
    	System.assertNotEquals(null, quoteDoc.lineItems);
    	System.assertEquals(1, quoteDoc.lineItems.size());
    	System.assertNotEquals(null, quoteDoc.headerConditions);
    	System.assertEquals(2, quoteDoc.headerConditions.size());
    	
    	// line items
    	System.assertEquals(10, quoteDoc.lineItems[0].lineNumber);
    	System.assertEquals('4592452CBC', quoteDoc.lineItems[0].materialNumber);
    	System.assertEquals('N 24V 3PZM375 BAT CHRG RAL9005', quoteDoc.lineItems[0].materialDescription);
    	System.assertEquals(1, quoteDoc.lineItems[0].quantity);
    	System.assertEquals('PC', quoteDoc.lineItems[0].priceUnit);
    	System.assertEquals(5000, quoteDoc.lineItems[0].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[0].currencyISOCode);
    	System.assertEquals(5000, quoteDoc.lineItems[0].value);
    	System.assertEquals('9936_50003_00_H', quoteDoc.lineItems[0].drawingNo);
    	System.assertEquals('621 mm x 281 mm x 610 mm', quoteDoc.lineItems[0].dimensions);
    	System.assertEquals(0, quoteDoc.lineItems[0].itemText.size());
    	System.assertEquals(null, quoteDoc.lineItems[0].shipToParty);
    	System.assertEquals(true, quoteDoc.lineItems[0].hasConfiguration);
    	System.assertEquals(false, quoteDoc.lineItems[0].hasItemText);
    	System.assertNotEquals(null, quoteDoc.lineItems[0].configuration);
    	System.assertEquals(8, quoteDoc.lineItems[0].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[0].conditions.size());
    	System.assertEquals(2, quoteDoc.lineItems[0].conditions.size());
    	System.assertEquals(5432.25, quoteDoc.lineItems[0].netValue);
    	
    	// line items conditions
    	System.assertEquals('Adeguamento MatPrime', quoteDoc.lineItems[0].conditions[0].name);
    	System.assertEquals(5, quoteDoc.lineItems[0].conditions[0].amount);
    	System.assertEquals('%', quoteDoc.lineItems[0].conditions[0].unit);
    	System.assertEquals(250, quoteDoc.lineItems[0].conditions[0].value);
    	System.assertEquals('', quoteDoc.lineItems[0].conditions[0].priceUnit);
    	
    	System.assertEquals('Costo ex Dlgs 188/08', quoteDoc.lineItems[0].conditions[1].name);
    	System.assertEquals(0, quoteDoc.lineItems[0].conditions[1].amount);
    	System.assertEquals('', quoteDoc.lineItems[0].conditions[1].unit);
    	System.assertEquals(24.75, quoteDoc.lineItems[0].conditions[1].value);
    	System.assertEquals('', quoteDoc.lineItems[0].conditions[1].priceUnit);
    	
    	// header conditions
    	System.assertEquals('Contr.Trasp. (%)', quoteDoc.headerConditions[0].name);
    	System.assertEquals(5250, quoteDoc.headerConditions[0].baseAmount);
    	System.assertEquals(3, quoteDoc.headerConditions[0].rate);
    	System.assertEquals('%', quoteDoc.headerConditions[0].unit);
    	System.assertEquals(157.5, quoteDoc.headerConditions[0].amount);
    	
    	System.assertEquals('IVA vendite', quoteDoc.headerConditions[1].name);
    	System.assertEquals(5432.25, quoteDoc.headerConditions[1].baseAmount);
    	System.assertEquals(22, quoteDoc.headerConditions[1].rate);
    	System.assertEquals('%', quoteDoc.headerConditions[1].unit);
    	System.assertEquals(1195.1, quoteDoc.headerConditions[1].amount);
    }
    
    @isTest
    private static void parseQuoteXmlTest2() {    	
    	String xmlString = '<?xml version="1.0" encoding="UTF-8"?><data xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0 /"><SLS_PRT_COM><HEAD_DETAIL><VBDKA><LAND1>DE</LAND1><KUNNR>29625</KUNNR><VKORG>0001</VKORG><VBELN>20148249</VBELN><AUDAT>2017-07-05</AUDAT><BSTDK /><IHREZ /><BNAME /><VBELN_VANG /><VBTYP_VANG /><AUDAT_VANG /><VSBED_BEZ>LKW (W)</VSBED_BEZ><INCO1>ZFH</INCO1><INCO2 /><INCO1_BEZ>frei Haus innerhalb DE</INCO1_BEZ><LFDAT>07.07.2017</LFDAT><DATBEZ>Tag</DATBEZ><BRGEW>0</BRGEW><NTGEW>0</NTGEW><GEWEI>KG</GEWEI><VOLUM>0.000</VOLUM><VOLEH /><WAERK>EUR</WAERK><NETWR>4278.50</NETWR><VBTYP>B</VBTYP><ANGDT>2017-07-05</ANGDT><BNDDT>2017-07-31</BNDDT><GUEBG /><GUEEN /><AUGRU /><LIFSK /><VBKLT /><BSTKD>Test different VATs</BSTKD><ZZSUPOS>4278.50</ZZSUPOS><VTEXT /><ZZEIKTO /><SUPOS>0.00</SUPOS><INCOV /><INCO2_L /><INCO3_L /><INCO2_L_LBL /><INCO3_L_LBL /><BSTOB /></VBDKA><CONDITIONS><DATA xfa:dataNode="dataGroup"><KSCHL>MWST</KSCHL><KAWRT>415.50</KAWRT><KBETR>0.000</KBETR><KOEIN /><KPEIN>0</KPEIN><KMEIN /><KWERT>0.00</KWERT><VTEXT>Umsatzsteuer</VTEXT><ZZTAXTEXT /><ZZTAXAMEND /><KAQTY>0E-14</KAQTY></DATA><DATA xfa:dataNode="dataGroup"><KSCHL>MWST</KSCHL><KAWRT>-500.00</KAWRT><KBETR>0.000</KBETR><KOEIN /><KPEIN>0</KPEIN><KMEIN /><KWERT>0.00</KWERT><VTEXT>Umsatzsteuer</VTEXT><ZZTAXTEXT /><ZZTAXAMEND /><KAQTY>0E-14</KAQTY></DATA><DATA xfa:dataNode="dataGroup"><KSCHL>MWST</KSCHL><KAWRT>4363.00</KAWRT><KBETR>19.000</KBETR><KOEIN>%</KOEIN><KPEIN>0</KPEIN><KMEIN /><KWERT>828.97</KWERT><VTEXT>Umsatzsteuer</VTEXT><ZZTAXTEXT /><ZZTAXAMEND /><KAQTY>0E-14</KAQTY></DATA></CONDITIONS><TVKO /><REPEAT /><LOGO_URL /><GROSS_VALUE>5107.47</GROSS_VALUE><EX_CANCELLATION_DATES /><VEDKA><VBEGDAT /><BEZEI_BEG /><VENDDAT /></VEDKA><VBTYP_TEXT>Angebot</VBTYP_TEXT><VBTYP_VANG_TEXT /><ZZPERSONNEL_ID><ZZNAME1>Susanne Kächele</ZZNAME1><ZZTELF1>02331/372-753</ZZTELF1><ZZTELF2 /><ZZTELFX>02331/372-804</ZZTELFX><ZZEMAIL>susanne.kaechele@de.enersys.com</ZZEMAIL></ZZPERSONNEL_ID><ZZPERSONNEL_VE><ZZNAME1>Matthias Thor</ZZNAME1><ZZTELF1>02302/205 2288</ZZTELF1><ZZTELF2>0171/7322730</ZZTELF2><ZZTELFX>02302/277 215</ZZTELFX><ZZEMAIL>matthias.thor@de.enersys.com</ZZEMAIL></ZZPERSONNEL_VE><ZZPARTNER_AP><ZZNAME1 /></ZZPARTNER_AP><ZZEX_SPEED /><ZZWORK_ORDER /><ZZCOPY /><ZZPARTNER_ZU /><FOOTER_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;"><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;"><span style=" font-family : &amp;quot;ARIAL&amp;quot; ; font-size : 7pt ; font-weight : bold ;">Hawker GmbH</span><span style="xfa-tab-count : 1 ;" />Sitz der Gesellschaft / Gerichtsstand: Hagen<span style="xfa-tab-count : 1 ;" />Bankverbindung:</div><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;">Dieckstraße 42<span style="xfa-tab-count : 1 ;" />HRB 3291, Steuernummer: 321/5717/1673<span style="xfa-tab-count : 1 ;" />DZ Bank AG, Frankfurt am Main</div><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;">58089 Hagen<span style="xfa-tab-count : 1 ;" />Ust.-ID Nr. DE 136705730<span style="xfa-tab-count : 1 ;" />Bankleitzahl 50060400</div><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;">Germany<span style="xfa-tab-count : 1 ;" />Geschäftsführer: Magnus Becker<span style="xfa-tab-count : 1 ;" />Kontonummer 0010141855</div><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;">Tel: +49 (0)23 31 372-0<span style="xfa-tab-count : 1 ;" /><span style="xfa-tab-count : 1 ;" />IBAN Nr. DE 71 5006 0400 0010</div><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;">Fax:+49 (0)23 31 372-183<span style="xfa-tab-count : 1 ;" /><span style="xfa-tab-count : 1 ;" />1418 55</div><div style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :left 3.50cm left 9cm ;"><span style=" font-family : &amp;quot;ARIAL&amp;quot; ; font-size : 7pt ; color : #FF0000 ;">www.enersys.com</span><span style="xfa-tab-count : 1 ;" /><span style="xfa-tab-count : 1 ;" />BIC / SWIFT GENODEFFXXX</div></div></FOOTER_TEXT><CUSTOMER_ADDRESS>Still GmbH(WNL Dortmund)Breisenbachstr. 10644357 Dortmund-Oestrich</CUSTOMER_ADDRESS><OUR_ADDRESS xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;"><div style="tab-stops :left 6cm left 13.50cm ;"><span style=" font-family : &amp;quot;ARIAL&amp;quot; ; font-size : 7pt ; font-weight : bold ;">Hawker GmbH</span><span style="xfa-spacerun:yes">* Postfach 4280 * D-58042 Hagen</span></div></div></OUR_ADDRESS><TOP_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Sehr geehrte</div><div><span style="xfa-spacerun:yes" /><br /></div><div>wir danken für Ihre Anfrage und bieten Ihnen wie gewünscht an:</div></div></TOP_TEXT_DYNAMIC><TOP_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div><span style="xfa-spacerun:yes" /><br /></div></div></TOP_TEXT><BOTTOM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" /></BOTTOM_TEXT_DYNAMIC><BOTTOM_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Unsere Lieferungen erfolgen grundsätzlich unter verlängertem Eigentumsvorbehalt.</div></div></BOTTOM_TEXT><PAYMENT_TERMS_ALTERNATIVE><TRUE xfa:dataNode="dataGroup"><ZTERM_TX1>Innerhalb10 Tagen 2,000% Skonto</ZTERM_TX1><ZTERM_TX2>Innerhalb60 Tagen ohne Abzug</ZTERM_TX2><ZTERM_TX3 /></TRUE></PAYMENT_TERMS_ALTERNATIVE><TERMS_CONDITIONS xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" style=" font-family : &amp;quot;Arial&amp;quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;"><div style=" font-family : &amp;quot;ARIAL&amp;quot; ; font-size : 9pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;">Es gelten ausdrücklich unsere Lieferbedingungen, sofern nicht anderes schriftlich vereinbart wurde. Bei Bedarf senden wir Ihnen gerne eine Kopie unserer allgemeinen Geschäftsbedingungen zu. Unsere AGB stehen Ihnen auch auf unserer Homepage unter folgendem Link als Download bereit:</div><div style="tab-stops :left 6cm left 13.50cm ;"><span style="xfa-spacerun:yes" /><br /></div></div></TERMS_CONDITIONS><VERY_LAST_TEXTS xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Wir hoffen, daß unser Angebot Ihren Vorstellungen entspricht und würden uns über Ihren geschätzten Auftrag freuen.</div><div><span style="xfa-spacerun:yes" /><br /></div><div>Der EnerSys Lead Adjuster ist freibleibend und richtet sich nach dem zum Zeitpunkt der Bestellung gültigen Wert.</div><div><span style="xfa-spacerun:yes" /><br /></div><div>Hawker GmbH ist zertifiziert nach ISO 9001:2008, nach ISO 14001:2004 und nach OHSAS 18001:2007</div><div><span style="xfa-spacerun:yes" /><br /></div><div>Bezüglich der Entgeltminderungen verweisen wir auf die aktuellen Zahlungs- und Konditionsvereinbarungen.</div><div><span style="xfa-spacerun:yes" /><br /></div><div>Diese Nachricht wurde elektronisch erstellt und ist auch ohne Unterschrift gültig.</div><div><span style="xfa-spacerun:yes" /><br /></div><div>Hawker GmbH</div></div></VERY_LAST_TEXTS></HEAD_DETAIL><ITEM_DETAIL><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000010</POSNR><UEPOS>000000</UEPOS><POSEX /><MATNR>4602212CBC</MATNR><IDNKD /><ARKTX>N 24V 3PZV330 BAT CHRG RAL7021</ARKTX><CHARG /><PSTYV>AGC</PSTYV><KWMENG>1.000</KWMENG><VRKME>ST</VRKME><VBELN_VANG /><AUDAT_VANG /><INCO1 /><INCO2 /><ABGRU />			<NETWR>4363.00</NETWR><BMENG>1.000</BMENG><DATBEZ>Tag</DATBEZ><BSTKD /><BSTKD_E /><POSEX_E /><VGBEL /><VGPOS>000000</VGPOS><ACTIVITY_TYPE /><ZZSTAWN /><ZZZEINR>9936_50003_00_F</ZZZEINR><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT /><ZZDIMENSIONS>621 mm x 281 mm x 610 mm</ZZDIMENSIONS><ZZBRAND /><ZZCHARG_PROFILE /><ZZDIMENSIONS_2 /><ZZ_ATEX /><ZZMAT_DIMENSION>621X281X625</ZZMAT_DIMENSION><SGT_RCAT /><INCOV /><INCO2_L /><INCO3_L /><INCO2_L_LBL /><INCO3_L_LBL /><BSTOB /></VBDPA><EX_CONDITIONS /><EX_BILL_PLAN /><EX_SUB_ITEMS /><EX_CONFIGURATION>X</EX_CONFIGURATION><EX_SCHEDULE_LINES /><EX_SERIALS /><VEDPA><VBEGDAT /><BEZEI_BEG /><VENDDAT /></VEDPA><EX_CANCELLATION_DATES /><VBTYP_VANG_TEXT /><CORRECTION_TEXT /><BILL_PLAN_PERIODIC><BEDAT /><ENDAT /><BETXT /><ENTXT /><PETXT /><PEROP_BEG /><PEROP_END /></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>4363.00</KBETR><KOEIN>EUR</KOEIN><KPEIN>1</KPEIN><KMEIN>ST</KMEIN><KWERT>4363.00</KWERT><VTEXT>Zwischensumme</VTEXT><ZZTAXTEXT /><ZZTAXAMEND /><KAQTY>0</KAQTY></ZZNET_PRICE><ZZCONFIGURATION_CBC><DATA xfa:dataNode="dataGroup"><ATBEZ>Brand:</ATBEZ><VALUE>Hawker</VALUE><VBELN>20148249</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR /><ATNAM>M_BRAND</ATNAM><OR_VALUE>Hawker</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Anzahl der Tröge:</ATBEZ><VALUE>1</VALUE><VBELN>20148249</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR /><ATNAM>T_TROGANZAHL</ATNAM><OR_VALUE>1</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Beschichtung:</ATBEZ><VALUE>PE-Beschichtung</VALUE><VBELN>20148249</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR /><ATNAM>T_TROGBESCHICHTUNG</ATNAM><OR_VALUE>PE-Beschichtung</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Werkstoff des Troges:</ATBEZ><VALUE>Stahl</VALUE><VBELN>20148249</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR /><ATNAM>T_TROGWERKSTOFF</ATNAM><OR_VALUE>Stahl</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Betriebsgewicht:</ATBEZ><VALUE>301,00 kg</VALUE><VBELN>20148249</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR /><ATNAM>VHB_F_GEWICHT</ATNAM><OR_VALUE>301,00 kg</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>EU Stock:</ATBEZ><VALUE>N</VALUE><VBELN>20148249</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR /><ATNAM>T_EUSTOCK</ATNAM><OR_VALUE>N</OR_VALUE></DATA></ZZCONFIGURATION_CBC><ZZEX_CONFIGURATION_CBC>X</ZZEX_CONFIGURATION_CBC><ZZEX_CBTEXT /><ZZWORK_ORDER_AUFNR /><ZZWORK_ORDER_WADAT /><ZZHIDE /><ZZMULTI_SUBITEMS /><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" /></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup" /></ITEM_ZTERM_ALTERNATIVE><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" /></ABOVE_ITEM_TEXT_DENAMIC></DATA><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000020</POSNR><UEPOS>000000</UEPOS><POSEX /><MATNR>KMF_RUECKNAHME</MATNR><IDNKD /><ARKTX>Rücknahme Altbatterie</ARKTX><CHARG /><PSTYV>ZGA1</PSTYV><KWMENG>1.000</KWMENG><VRKME>ST</VRKME><VBELN_VANG /><AUDAT_VANG /><INCO1 /><INCO2 /><ABGRU /><BMENG>1.000</BMENG>			<NETWR>-500.00</NETWR><DATBEZ>Tag</DATBEZ><BSTKD /><BSTKD_E /><POSEX_E /><VGBEL /><VGPOS>000000</VGPOS><ACTIVITY_TYPE /><ZZSTAWN /><ZZZEINR /><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT /><ZZDIMENSIONS /><ZZBRAND /><ZZCHARG_PROFILE /><ZZDIMENSIONS_2 /><ZZ_ATEX /><ZZMAT_DIMENSION /><SGT_RCAT /><INCOV /><INCO2_L /><INCO3_L /><INCO2_L_LBL /><INCO3_L_LBL /><BSTOB /></VBDPA><EX_CONDITIONS /><EX_BILL_PLAN /><EX_SUB_ITEMS /><EX_CONFIGURATION /><EX_SCHEDULE_LINES /><EX_SERIALS /><VEDPA><VBEGDAT /><BEZEI_BEG /><VENDDAT /></VEDPA><EX_CANCELLATION_DATES /><VBTYP_VANG_TEXT /><CORRECTION_TEXT /><BILL_PLAN_PERIODIC><BEDAT /><ENDAT /><BETXT /><ENTXT /><PETXT /><PEROP_BEG /><PEROP_END /></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>-500.00</KBETR><KOEIN>EUR</KOEIN><KPEIN>1</KPEIN><KMEIN>ST</KMEIN><KWERT>-500.00</KWERT><VTEXT>Gutschrift_Gesamt</VTEXT><ZZTAXTEXT /><ZZTAXAMEND /><KAQTY>0E-14</KAQTY></ZZNET_PRICE><ZZEX_CONFIGURATION_CBC /><ZZEX_CBTEXT /><ZZWORK_ORDER_AUFNR /><ZZWORK_ORDER_WADAT /><ZZHIDE /><ZZMULTI_SUBITEMS /><ITEM_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Bindefrist für Altbatterie-Entsorgung: immer freibleibend</div></div></ITEM_TEXT><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Bindefrist für Altbatterie-Entsorgung: immer freibleibend</div><div>Für diese Lieferung liegt die Steuerschuldnerschaft nach $ 13b Abs.5 S.1 UStG in Verbindung mit § 13 bs.2 Nr.7 UstG beim Leistungsempfänger</div></div></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup" /></ITEM_ZTERM_ALTERNATIVE><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" /></ABOVE_ITEM_TEXT_DENAMIC></DATA><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000030</POSNR><UEPOS>000000</UEPOS><POSEX /><MATNR>128PM3MLT2B24CP</MATNR><IDNKD /><ARKTX>LG LifeTech modular E 24V 2KW CP</ARKTX><CHARG /><PSTYV>AGN</PSTYV><KWMENG>1.000</KWMENG><VRKME>ST</VRKME><VBELN_VANG /><AUDAT_VANG /><INCO1 /><INCO2 /><ABGRU /><BMENG>1.000</BMENG>		<NETWR>415.50</NETWR><DATBEZ>Tag</DATBEZ><BSTKD /><BSTKD_E /><POSEX_E /><VGBEL /><VGPOS>000000</VGPOS><ACTIVITY_TYPE /><ZZSTAWN /><ZZZEINR /><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT /><ZZDIMENSIONS /><ZZBRAND /><ZZCHARG_PROFILE /><ZZDIMENSIONS_2 /><ZZ_ATEX /><ZZMAT_DIMENSION /><SGT_RCAT /><INCOV /><INCO2_L /><INCO3_L /><INCO2_L_LBL /><INCO3_L_LBL /><BSTOB /></VBDPA><EX_CONDITIONS /><EX_BILL_PLAN /><EX_SUB_ITEMS /><EX_CONFIGURATION /><EX_SCHEDULE_LINES /><EX_SERIALS /><VEDPA><VBEGDAT /><BEZEI_BEG /><VENDDAT /></VEDPA><EX_CANCELLATION_DATES /><VBTYP_VANG_TEXT /><CORRECTION_TEXT /><BILL_PLAN_PERIODIC><BEDAT /><ENDAT /><BETXT /><ENTXT /><PETXT /><PEROP_BEG /><PEROP_END /></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>415.50</KBETR><KOEIN>EUR</KOEIN><KPEIN>1</KPEIN><KMEIN>ST</KMEIN><KWERT>415.50</KWERT><VTEXT>Zwischensumme</VTEXT><ZZTAXTEXT /><ZZTAXAMEND /><KAQTY>0</KAQTY></ZZNET_PRICE><ZZEX_CONFIGURATION_CBC /><ZZEX_CBTEXT /><ZZWORK_ORDER_AUFNR /><ZZWORK_ORDER_WADAT /><ZZHIDE /><ZZMULTI_SUBITEMS /><ITEM_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>HF-Ladegerät</div></div></ITEM_TEXT><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>HF-Ladegerät</div></div></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup" /></ITEM_ZTERM_ALTERNATIVE><ITEM_ADDRESS_SHIP_TO>APM Terminals Maasvlakte IIHaven 8410TEREX-APMT MVII-Mr.Wesley ClaessensPhone +32 4 78277019Europaweg 9103199 LCROTTERDAMNIEDERLANDE</ITEM_ADDRESS_SHIP_TO><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/" /></ABOVE_ITEM_TEXT_DENAMIC><ADDRESS_ITEM_SHIP_TO>APM Terminals Maasvlakte IIHaven 8410TEREX-APMT MVII-Mr.Wesley ClaessensPhone +32 4 78277019Europaweg 9103199 LCROTTERDAMNIEDERLANDE</ADDRESS_ITEM_SHIP_TO></DATA></ITEM_DETAIL><GV_LANG>DE</GV_LANG></SLS_PRT_COM><GV_SYSID>C01</GV_SYSID><GV_DATE>2017-08-02</GV_DATE><VBTYP /><ZS_EXTRADATA><EIKTO /><SALESDOCTYPE /><DOCLANGUAGE /><VTWEG /><SPART /></ZS_EXTRADATA><USERNAME>MARFIL</USERNAME></data>';
    	
    	SAPQuoteXmlParser parser = new SAPQuoteXmlParser(xmlString);
    	
    	Test.startTest();
    	
    	SAPQuoteXmlParser.SAPQuoteDocument quoteDoc = parser.parse();
    	
    	Test.stopTest();
    	
    	System.assertEquals('EUR', quoteDoc.currencyISOCode);
    	System.assertEquals(4278.5, quoteDoc.value);
    	System.assertEquals(5107.47, quoteDoc.grossValue);
    	System.assertNotEquals(null, quoteDoc.lineItems);
    	System.assertEquals(3, quoteDoc.lineItems.size());
    	System.assertNotEquals(null, quoteDoc.headerConditions);
    	System.assertEquals(3, quoteDoc.headerConditions.size());
    	
    	// line items
    	System.assertEquals(10, quoteDoc.lineItems[0].lineNumber);
    	System.assertEquals('4602212CBC', quoteDoc.lineItems[0].materialNumber);
    	System.assertEquals('N 24V 3PZV330 BAT CHRG RAL7021', quoteDoc.lineItems[0].materialDescription);
    	System.assertEquals(1, quoteDoc.lineItems[0].quantity);
    	System.assertEquals('ST', quoteDoc.lineItems[0].priceUnit);
    	System.assertEquals(4363, quoteDoc.lineItems[0].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[0].currencyISOCode);
    	System.assertEquals(4363, quoteDoc.lineItems[0].value);
    	System.assertEquals('9936_50003_00_F', quoteDoc.lineItems[0].drawingNo);
    	System.assertEquals('621 mm x 281 mm x 610 mm', quoteDoc.lineItems[0].dimensions);
    	System.assertEquals(0, quoteDoc.lineItems[0].itemText.size());
    	System.assertEquals(null, quoteDoc.lineItems[0].shipToParty);
    	System.assertEquals(true, quoteDoc.lineItems[0].hasConfiguration);
    	System.assertEquals(false, quoteDoc.lineItems[0].hasItemText);
    	System.assertNotEquals(null, quoteDoc.lineItems[0].configuration);
    	System.assertEquals(6, quoteDoc.lineItems[0].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[0].conditions.size());
    	System.assertEquals(0, quoteDoc.lineItems[0].conditions.size());
    	System.assertEquals(4363.00, quoteDoc.lineItems[0].netValue);
    	
		System.assertEquals(20, quoteDoc.lineItems[1].lineNumber);
    	System.assertEquals('KMF_RUECKNAHME', quoteDoc.lineItems[1].materialNumber);
    	System.assertEquals('Rücknahme Altbatterie', quoteDoc.lineItems[1].materialDescription);
    	System.assertEquals(1, quoteDoc.lineItems[1].quantity);
    	System.assertEquals('ST', quoteDoc.lineItems[1].priceUnit);
    	System.assertEquals(-500, quoteDoc.lineItems[1].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[1].currencyISOCode);
    	System.assertEquals(-500, quoteDoc.lineItems[1].value);
    	System.assertEquals('', quoteDoc.lineItems[1].drawingNo);
    	System.assertEquals('', quoteDoc.lineItems[1].dimensions);
    	System.assertEquals(2, quoteDoc.lineItems[1].itemText.size());
    	System.assertEquals(null, quoteDoc.lineItems[1].shipToParty);
    	System.assertEquals(-500.00, quoteDoc.lineItems[1].netValue);
    	
    	System.assertNotEquals(null, quoteDoc.lineItems[1].configuration);
    	System.assertEquals(0, quoteDoc.lineItems[1].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[1].conditions.size());
    	System.assertEquals(0, quoteDoc.lineItems[1].conditions.size());
    	
    	System.assertEquals(30, quoteDoc.lineItems[2].lineNumber);
    	System.assertEquals('128PM3MLT2B24CP', quoteDoc.lineItems[2].materialNumber);
    	System.assertEquals('LG LifeTech modular E 24V 2KW CP', quoteDoc.lineItems[2].materialDescription);
    	System.assertEquals(1, quoteDoc.lineItems[2].quantity);
    	System.assertEquals('ST', quoteDoc.lineItems[2].priceUnit);
    	System.assertEquals(415.5, quoteDoc.lineItems[2].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[2].currencyISOCode);
    	System.assertEquals(415.5, quoteDoc.lineItems[2].value);
    	System.assertEquals('', quoteDoc.lineItems[2].drawingNo);
    	System.assertEquals('', quoteDoc.lineItems[2].dimensions);
    	System.assertEquals(1, quoteDoc.lineItems[2].itemText.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[2].shipToParty);
    	System.assertEquals(415.50, quoteDoc.lineItems[2].netValue);
    	
    	System.assertNotEquals(null, quoteDoc.lineItems[2].configuration);
    	System.assertEquals(0, quoteDoc.lineItems[2].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[2].conditions.size());
    	System.assertEquals(0, quoteDoc.lineItems[2].conditions.size());
    	
    	
    	// header conditions
    	System.assertEquals('Umsatzsteuer', quoteDoc.headerConditions[0].name);
    	System.assertEquals(415.5, quoteDoc.headerConditions[0].baseAmount);
    	System.assertEquals(0, quoteDoc.headerConditions[0].rate);
    	System.assertEquals('', quoteDoc.headerConditions[0].unit);
    	System.assertEquals(0, quoteDoc.headerConditions[0].amount);
    	
    	System.assertEquals('Umsatzsteuer', quoteDoc.headerConditions[1].name);
    	System.assertEquals(-500, quoteDoc.headerConditions[1].baseAmount);
    	System.assertEquals(0, quoteDoc.headerConditions[1].rate);
    	System.assertEquals('', quoteDoc.headerConditions[1].unit);
    	System.assertEquals(0, quoteDoc.headerConditions[1].amount);
    }
    
    @isTest
    private static void parseQuoteXmlTest3() {
    	String xmlString = '<data xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"><SLS_PRT_COM><HEAD_DETAIL><VBDKA><LAND1>DE</LAND1><KUNNR>58095</KUNNR><VKORG>0001</VKORG><VBELN>20148261</VBELN><AUDAT>2017-07-11</AUDAT><BSTDK></BSTDK><IHREZ></IHREZ><BNAME></BNAME><VBELN_VANG></VBELN_VANG><VBTYP_VANG></VBTYP_VANG><AUDAT_VANG></AUDAT_VANG><VSBED_BEZ>Truck (W)</VSBED_BEZ><INCO1>ZFH</INCO1><INCO2></INCO2><INCO1_BEZ>Free of charge within Germany</INCO1_BEZ><LFDAT>12.07.2017</LFDAT><DATBEZ>Day</DATBEZ><BRGEW>2115</BRGEW><NTGEW>2115</NTGEW><GEWEI>KG</GEWEI><VOLUM>0.000</VOLUM><VOLEH></VOLEH><WAERK>EUR</WAERK><NETWR>9000.00</NETWR><VBTYP>B</VBTYP><ANGDT>2017-07-11</ANGDT><BNDDT>2017-08-11</BNDDT><GUEBG></GUEBG><GUEEN></GUEEN><AUGRU></AUGRU><LIFSK></LIFSK><VBKLT></VBKLT><BSTKD>Chapter 9:  HM00</BSTKD><ZZSUPOS>0.00</ZZSUPOS><VTEXT></VTEXT><ZZEIKTO></ZZEIKTO><SUPOS>0.00</SUPOS><INCOV></INCOV><INCO2_L></INCO2_L><INCO3_L></INCO3_L><INCO2_L_LBL></INCO2_L_LBL><INCO3_L_LBL></INCO3_L_LBL><BSTOB></BSTOB></VBDKA><CONDITIONS><DATA xfa:dataNode="dataGroup"><KSCHL>HM00</KSCHL><KAWRT>0</KAWRT><KBETR>0.00</KBETR><KOEIN></KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>9000.00</KWERT><VTEXT>Order value</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0E-14</KAQTY></DATA><DATA xfa:dataNode="dataGroup"><KSCHL>MWST</KSCHL><KAWRT>9000.00</KAWRT><KBETR>19.000</KBETR><KOEIN>%</KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>1710.00</KWERT><VTEXT>VAT</VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0E-14</KAQTY></DATA></CONDITIONS><TVKO/><REPEAT></REPEAT><LOGO_URL></LOGO_URL><GROSS_VALUE>10710.00</GROSS_VALUE><EX_CANCELLATION_DATES></EX_CANCELLATION_DATES><VEDKA><VBEGDAT></VBEGDAT><BEZEI_BEG></BEZEI_BEG><VENDDAT></VENDDAT></VEDKA><VBTYP_TEXT>Quotation</VBTYP_TEXT><VBTYP_VANG_TEXT></VBTYP_VANG_TEXT><ZZPERSONNEL_ID><ZZNAME1>Nicole Heiermann</ZZNAME1><ZZTELF1>02331/372-957</ZZTELF1><ZZTELF2></ZZTELF2><ZZTELFX>02331/372-804</ZZTELFX><ZZEMAIL>nicole.heiermann@de.enersys.com</ZZEMAIL></ZZPERSONNEL_ID><ZZPERSONNEL_VE><ZZNAME1>Mirko Bogunovic</ZZNAME1><ZZTELF1>05221/179258</ZZTELF1><ZZTELF2>0171/7390759</ZZTELF2><ZZTELFX>05221/179325</ZZTELFX><ZZEMAIL>mirko.bogunovic@de.enersys.com</ZZEMAIL></ZZPERSONNEL_VE><ZZPARTNER_AP><ZZNAME1></ZZNAME1></ZZPARTNER_AP><ZZEX_SPEED></ZZEX_SPEED><ZZWORK_ORDER></ZZWORK_ORDER><ZZCOPY></ZZCOPY><ZZPARTNER_ZU></ZZPARTNER_ZU><FOOTER_TEXT xfa:contentType="text/html"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;" xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; font-weight : bold ;">Hawker GmbH</span><span style="xfa-tab-count : 1 ;"/>Sitz der Gesellschaft / Gerichtsstand: Hagen<span style="xfa-tab-count : 1 ;"/>Bankverbindung:</div><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;">Dieckstraße 42<span style="xfa-tab-count : 1 ;"/>HRB 3291, Steuernummer: 321/5717/1673<span style="xfa-tab-count : 1 ;"/>DZ Bank AG, Frankfurt am Main</div><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;">58089 Hagen<span style="xfa-tab-count : 1 ;"/>Ust.-ID Nr. DE 136705730<span style="xfa-tab-count : 1 ;"/>Bankleitzahl 50060400</div><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;">Germany<span style="xfa-tab-count : 1 ;"/>Geschäftsführer: Magnus Becker<span style="xfa-tab-count : 1 ;"/>Kontonummer 0010141855</div><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;">Tel: +49 (0)23 31 372-0<span style="xfa-tab-count : 1 ;"/><span style="xfa-tab-count : 1 ;"/>IBAN Nr. DE 71 5006 0400 0010</div><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;">Fax:+49 (0)23 31 372-183<span style="xfa-tab-count : 1 ;"/><span style="xfa-tab-count : 1 ;"/>1418 55</div><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ; tab-stops :  left 3.50cm left 9cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; color : #FF0000 ;">www.enersys.com</span><span style="xfa-tab-count : 1 ;"/><span style="xfa-tab-count : 1 ;"/>BIC / SWIFT GENODEFFXXX</div></div></FOOTER_TEXT><CUSTOMER_ADDRESS>Gustav Wellmann GmbH &amp; Co. KG Werk I Bustedter Weg 16 32130 Enger</CUSTOMER_ADDRESS><OUR_ADDRESS xfa:contentType="text/html"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;" xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div style="tab-stops :  left 6cm left 13.50cm ;"><span style=" font-family : &quot;ARIAL&quot; ; font-size : 7pt ; font-weight : bold ;">Hawker GmbH</span><span style="xfa-spacerun:yes"> * Postfach 4280 * D-58042 Hagen</span></div></div></OUR_ADDRESS><TOP_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>We thank you for your enquiry and have pleasure in</div><div>submitting the following offer:</div></div></TOP_TEXT_DYNAMIC><TOP_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div><span style="xfa-spacerun:yes"> </span><br/></div></div></TOP_TEXT><BOTTOM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></BOTTOM_TEXT_DYNAMIC><BOTTOM_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Our deliveries are on principle subject to prolonged reservation of proprietary rights.</div></div></BOTTOM_TEXT><PAYMENT_TERMS_ALTERNATIVE><TRUE xfa:dataNode="dataGroup"><ZTERM_TX1>3,000  % discount until day  15 of subsequent month</ZTERM_TX1><ZTERM_TX2>Within  60 days without deduction</ZTERM_TX2><ZTERM_TX3></ZTERM_TX3></TRUE></PAYMENT_TERMS_ALTERNATIVE><TERMS_CONDITIONS xfa:contentType="text/html"><div style=" font-family : &quot;Arial&quot; ; font-size : 7pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;" xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div style=" font-family : &quot;ARIAL&quot; ; font-size : 9pt ; font-weight : normal ; line-height : 0.00mm ; text-decoration : none ; text-align : left ; clear : both ;">All our sales are subject our terms and conditions unless otherwise agreed in writing.A copy of the standard Terms and Conditions can be supplied upon request or downloaded from:</div><div style="tab-stops :  left 6cm left 13.50cm ;"><span style="xfa-spacerun:yes"> </span><br/></div></div></TERMS_CONDITIONS><VERY_LAST_TEXTS xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>Wir hoffen, daß unser Angebot Ihren Vorstellungen entspricht und würden uns über Ihren geschätzten Auftrag freuen.</div><div><span style="xfa-spacerun:yes"> </span><br/></div><div>Der EnerSys Lead Adjuster ist freibleibend und richtet sich nach dem zum Zeitpunkt der Bestellung gültigen Wert.</div><div><span style="xfa-spacerun:yes"> </span><br/></div><div>Hawker GmbH ist zertifiziert nach ISO 9001:2008, nach ISO 14001:2004 und nach OHSAS 18001:2007</div><div><span style="xfa-spacerun:yes"> </span><br/></div><div>Bezüglich der Entgeltminderungen verweisen wir auf die aktuellen Zahlungs- und Konditionsvereinbarungen.</div><div><span style="xfa-spacerun:yes"> </span><br/></div><div>Diese Nachricht wurde elektronisch erstellt und ist auch ohne Unterschrift gültig.</div><div><span style="xfa-spacerun:yes"> </span><br/></div><div>Hawker GmbH</div></div></VERY_LAST_TEXTS></HEAD_DETAIL><ITEM_DETAIL><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000010</POSNR><UEPOS>000000</UEPOS><POSEX></POSEX><MATNR>3258285CBC</MATNR><IDNKD></IDNKD><ARKTX>N 80V 6PZS840 BAT CHRG RAL9005</ARKTX><CHARG></CHARG><PSTYV>AGC</PSTYV><NETWR>8788.19</NETWR><KWMENG>1.000</KWMENG><VRKME>PC</VRKME><VBELN_VANG>20148252</VBELN_VANG><AUDAT_VANG>2017-07-11</AUDAT_VANG><INCO1></INCO1><INCO2></INCO2><ABGRU></ABGRU><BMENG>1.000</BMENG><DATBEZ>Day</DATBEZ><BSTKD></BSTKD><BSTKD_E></BSTKD_E><POSEX_E></POSEX_E><VGBEL>20148252</VGBEL><VGPOS>000010</VGPOS><ACTIVITY_TYPE></ACTIVITY_TYPE><ZZSTAWN></ZZSTAWN><ZZZEINR>9936_50443_00_H</ZZZEINR><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT></ZZWEIUNIT><ZZDIMENSIONS>1.025 mm x 996 mm x 767 mm</ZZDIMENSIONS><ZZBRAND></ZZBRAND><ZZCHARG_PROFILE></ZZCHARG_PROFILE><ZZDIMENSIONS_2></ZZDIMENSIONS_2><ZZ_ATEX></ZZ_ATEX><ZZMAT_DIMENSION></ZZMAT_DIMENSION><SGT_RCAT></SGT_RCAT><INCOV></INCOV><INCO2_L></INCO2_L><INCO3_L></INCO3_L><INCO2_L_LBL></INCO2_L_LBL><INCO3_L_LBL></INCO3_L_LBL><BSTOB></BSTOB></VBDPA><EX_CONDITIONS></EX_CONDITIONS><EX_BILL_PLAN></EX_BILL_PLAN><EX_SUB_ITEMS></EX_SUB_ITEMS><EX_CONFIGURATION>X</EX_CONFIGURATION><EX_SCHEDULE_LINES></EX_SCHEDULE_LINES><EX_SERIALS></EX_SERIALS><VEDPA><VBEGDAT></VBEGDAT><BEZEI_BEG></BEZEI_BEG><VENDDAT></VENDDAT></VEDPA><EX_CANCELLATION_DATES></EX_CANCELLATION_DATES><VBTYP_VANG_TEXT>Quotation</VBTYP_VANG_TEXT><CORRECTION_TEXT></CORRECTION_TEXT><BILL_PLAN_PERIODIC><BEDAT></BEDAT><ENDAT></ENDAT><BETXT></BETXT><ENTXT></ENTXT><PETXT></PETXT><PEROP_BEG></PEROP_BEG><PEROP_END></PEROP_END></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>0.00</KBETR><KOEIN></KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>0.00</KWERT><VTEXT></VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0</KAQTY></ZZNET_PRICE><ZZCONFIGURATION_CBC><DATA xfa:dataNode="dataGroup"><ATBEZ>Air adapter:</ATBEZ><VALUE>Yes</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_AIR_ADAPTER</ATNAM><OR_VALUE>Yes</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Aquamatic:</ATBEZ><VALUE>Yes</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>VHB_F_AQUAMATIC</ATNAM><OR_VALUE>Yes</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Airmix:</ATBEZ><VALUE>Yes</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_AIRMIX</ATNAM><OR_VALUE>Yes</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>WI-IQ:</ATBEZ><VALUE>WIIQV1 with level &amp; T° 0.8m</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_WIIQ_TYPE</ATNAM><OR_VALUE>WIIQV1 with level &amp; T° 0.8m</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Harness material:</ATBEZ><VALUE>CBC Harness configurator</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>MATNR_HARNESS_1</ATNAM><OR_VALUE>HARNESS</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Harness equipment:</ATBEZ><VALUE>Socket</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_H_EQUIPM</ATNAM><OR_VALUE>Socket</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Harness voltage:</ATBEZ><VALUE>80 V</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_HARN_VOLTAGE</ATNAM><OR_VALUE>80 V</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Socket  make:</ATBEZ><VALUE>Rema</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_STECK_HERSTELLER</ATNAM><OR_VALUE>Rema</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Socket model:</ATBEZ><VALUE>DIN</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_STECK_BEZEICHNUNG</ATNAM><OR_VALUE>DIN</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Socket  size:</ATBEZ><VALUE>320 A</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_STECK_SIZE</ATNAM><OR_VALUE>320 A</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Socket color:</ATBEZ><VALUE>grey</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_STECK_FARBE</ATNAM><OR_VALUE>grey</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Cable cross section:</ATBEZ><VALUE>70 mm2</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_KABELQUERSCHNITT</ATNAM><OR_VALUE>70 mm2</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Handle:</ATBEZ><VALUE>screwed &amp; cranked</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_STECK_GRIFF</ATNAM><OR_VALUE>screwed &amp; cranked</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Handle color:</ATBEZ><VALUE>grey</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_STECK_GRIFF_F</ATNAM><OR_VALUE>grey</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Coding pin:</ATBEZ><VALUE>Code pin grey</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_CODING_PIN</ATNAM><OR_VALUE>Code pin grey</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Cable clamp:</ATBEZ><VALUE>Yes</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_CABLE_CLAMP</ATNAM><OR_VALUE>Yes</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Harness type:</ATBEZ><VALUE>end terminal Perfect</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_KABELART</ATNAM><OR_VALUE>end terminal Perfect</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Cable length pos.:</ATBEZ><VALUE>1.400 mm</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_POS_LAENGE</ATNAM><OR_VALUE>1.400 mm</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Cable length neg.:</ATBEZ><VALUE>1.400 mm</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_NEG_LAENGE</ATNAM><OR_VALUE>1.400 mm</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Brand:</ATBEZ><VALUE>Hawker</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>M_BRAND</ATNAM><OR_VALUE>Hawker</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Number of trays:</ATBEZ><VALUE>1</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_TROGANZAHL</ATNAM><OR_VALUE>1</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Tray coating:</ATBEZ><VALUE>inside and outside PE coating</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_TROGBESCHICHTUNG</ATNAM><OR_VALUE>inside and outside PE coating</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Tray material:</ATBEZ><VALUE>Steel</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_TROGWERKSTOFF</ATNAM><OR_VALUE>Steel</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>Battery operation weight:</ATBEZ><VALUE>2.115,00 kg</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>VHB_F_GEWICHT</ATNAM><OR_VALUE>2.115,00 kg</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>EU Stock:</ATBEZ><VALUE>No</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>T_EUSTOCK</ATNAM><OR_VALUE>No</OR_VALUE></DATA><DATA xfa:dataNode="dataGroup"><ATBEZ>FR Stock:</ATBEZ><VALUE>No</VALUE><VBELN>20148261</VBELN><POSNR>000010</POSNR><PRICE>0.00</PRICE><CURR></CURR><ATNAM>FR_STOCK</ATNAM><OR_VALUE>No</OR_VALUE></DATA></ZZCONFIGURATION_CBC><ZZEX_CONFIGURATION_CBC>X</ZZEX_CONFIGURATION_CBC><ZZEX_CBTEXT></ZZEX_CBTEXT><ZZWORK_ORDER_AUFNR></ZZWORK_ORDER_AUFNR><ZZWORK_ORDER_WADAT></ZZWORK_ORDER_WADAT><ZZHIDE></ZZHIDE><ZZMULTI_SUBITEMS></ZZMULTI_SUBITEMS><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup"/></ITEM_ZTERM_ALTERNATIVE><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ABOVE_ITEM_TEXT_DENAMIC></DATA><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000020</POSNR><UEPOS>000000</UEPOS><POSEX></POSEX><MATNR>2324419</MATNR><IDNKD></IDNKD><ARKTX>LABOUR COSTS/TRACTION</ARKTX><CHARG></CHARG><PSTYV>AGX</PSTYV><NETWR>126.54</NETWR><KWMENG>17.000</KWMENG><VRKME>PC</VRKME><VBELN_VANG></VBELN_VANG><AUDAT_VANG></AUDAT_VANG><INCO1></INCO1><INCO2></INCO2><ABGRU></ABGRU><BMENG>17.000</BMENG><DATBEZ>Day</DATBEZ><BSTKD></BSTKD><BSTKD_E></BSTKD_E><POSEX_E></POSEX_E><VGBEL></VGBEL><VGPOS>000000</VGPOS><ACTIVITY_TYPE></ACTIVITY_TYPE><ZZSTAWN></ZZSTAWN><ZZZEINR></ZZZEINR><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT></ZZWEIUNIT><ZZDIMENSIONS></ZZDIMENSIONS><ZZBRAND></ZZBRAND><ZZCHARG_PROFILE></ZZCHARG_PROFILE><ZZDIMENSIONS_2></ZZDIMENSIONS_2><ZZ_ATEX></ZZ_ATEX><ZZMAT_DIMENSION></ZZMAT_DIMENSION><SGT_RCAT></SGT_RCAT><INCOV></INCOV><INCO2_L></INCO2_L><INCO3_L></INCO3_L><INCO2_L_LBL></INCO2_L_LBL><INCO3_L_LBL></INCO3_L_LBL><BSTOB></BSTOB></VBDPA><EX_CONDITIONS></EX_CONDITIONS><EX_BILL_PLAN></EX_BILL_PLAN><EX_SUB_ITEMS></EX_SUB_ITEMS><EX_CONFIGURATION></EX_CONFIGURATION><EX_SCHEDULE_LINES></EX_SCHEDULE_LINES><EX_SERIALS></EX_SERIALS><VEDPA><VBEGDAT></VBEGDAT><BEZEI_BEG></BEZEI_BEG><VENDDAT></VENDDAT></VEDPA><EX_CANCELLATION_DATES></EX_CANCELLATION_DATES><VBTYP_VANG_TEXT></VBTYP_VANG_TEXT><CORRECTION_TEXT></CORRECTION_TEXT><BILL_PLAN_PERIODIC><BEDAT></BEDAT><ENDAT></ENDAT><BETXT></BETXT><ENTXT></ENTXT><PETXT></PETXT><PEROP_BEG></PEROP_BEG><PEROP_END></PEROP_END></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>0.00</KBETR><KOEIN></KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>0.00</KWERT><VTEXT></VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0</KAQTY></ZZNET_PRICE><ZZEX_CONFIGURATION_CBC></ZZEX_CONFIGURATION_CBC><ZZEX_CBTEXT></ZZEX_CBTEXT><ZZWORK_ORDER_AUFNR></ZZWORK_ORDER_AUFNR><ZZWORK_ORDER_WADAT></ZZWORK_ORDER_WADAT><ZZHIDE></ZZHIDE><ZZMULTI_SUBITEMS></ZZMULTI_SUBITEMS><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup"/></ITEM_ZTERM_ALTERNATIVE><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ABOVE_ITEM_TEXT_DENAMIC></DATA><DATA xfa:dataNode="dataGroup"><VBDPA><POSNR>000030</POSNR><UEPOS>000000</UEPOS><POSEX></POSEX><MATNR>1024328</MATNR><IDNKD></IDNKD><ARKTX>Plug    BFS III  HAWKER    without float</ARKTX><CHARG></CHARG><PSTYV>AGN</PSTYV><NETWR>85.27</NETWR><KWMENG>6.000</KWMENG><VRKME>PC</VRKME><VBELN_VANG></VBELN_VANG><AUDAT_VANG></AUDAT_VANG><INCO1></INCO1><INCO2></INCO2><ABGRU></ABGRU><BMENG>6.000</BMENG><DATBEZ>Day</DATBEZ><BSTKD></BSTKD><BSTKD_E></BSTKD_E><POSEX_E></POSEX_E><VGBEL></VGBEL><VGPOS>000000</VGPOS><ACTIVITY_TYPE></ACTIVITY_TYPE><ZZSTAWN></ZZSTAWN><ZZZEINR></ZZZEINR><ZZWEIGHT>0.000</ZZWEIGHT><ZZWEIUNIT></ZZWEIUNIT><ZZDIMENSIONS></ZZDIMENSIONS><ZZBRAND></ZZBRAND><ZZCHARG_PROFILE></ZZCHARG_PROFILE><ZZDIMENSIONS_2></ZZDIMENSIONS_2><ZZ_ATEX></ZZ_ATEX><ZZMAT_DIMENSION></ZZMAT_DIMENSION><SGT_RCAT></SGT_RCAT><INCOV></INCOV><INCO2_L></INCO2_L><INCO3_L></INCO3_L><INCO2_L_LBL></INCO2_L_LBL><INCO3_L_LBL></INCO3_L_LBL><BSTOB></BSTOB></VBDPA><EX_CONDITIONS></EX_CONDITIONS><EX_BILL_PLAN></EX_BILL_PLAN><EX_SUB_ITEMS></EX_SUB_ITEMS><EX_CONFIGURATION></EX_CONFIGURATION><EX_SCHEDULE_LINES></EX_SCHEDULE_LINES><EX_SERIALS></EX_SERIALS><VEDPA><VBEGDAT></VBEGDAT><BEZEI_BEG></BEZEI_BEG><VENDDAT></VENDDAT></VEDPA><EX_CANCELLATION_DATES></EX_CANCELLATION_DATES><VBTYP_VANG_TEXT></VBTYP_VANG_TEXT><CORRECTION_TEXT></CORRECTION_TEXT><BILL_PLAN_PERIODIC><BEDAT></BEDAT><ENDAT></ENDAT><BETXT></BETXT><ENTXT></ENTXT><PETXT></PETXT><PEROP_BEG></PEROP_BEG><PEROP_END></PEROP_END></BILL_PLAN_PERIODIC><ZZNET_PRICE><KBETR>0.00</KBETR><KOEIN></KOEIN><KPEIN>0</KPEIN><KMEIN></KMEIN><KWERT>0.00</KWERT><VTEXT></VTEXT><ZZTAXTEXT></ZZTAXTEXT><ZZTAXAMEND></ZZTAXAMEND><KAQTY>0</KAQTY></ZZNET_PRICE><ZZEX_CONFIGURATION_CBC></ZZEX_CONFIGURATION_CBC><ZZEX_CBTEXT></ZZEX_CBTEXT><ZZWORK_ORDER_AUFNR></ZZWORK_ORDER_AUFNR><ZZWORK_ORDER_WADAT></ZZWORK_ORDER_WADAT><ZZHIDE></ZZHIDE><ZZMULTI_SUBITEMS></ZZMULTI_SUBITEMS><ITEM_TEXT xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>WITHOUT FLOAT REGUL.</div></div></ITEM_TEXT><ITEM_TEXT_DYNAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"><div>WITHOUT FLOAT REGUL.</div></div></ITEM_TEXT_DYNAMIC><ITEM_ZTERM_ALTERNATIVE><FALSE xfa:dataNode="dataGroup"/></ITEM_ZTERM_ALTERNATIVE><ABOVE_ITEM_TEXT_DENAMIC xfa:contentType="text/html"><div xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-template/2.2/"/></ABOVE_ITEM_TEXT_DENAMIC></DATA></ITEM_DETAIL><GV_LANG>EN</GV_LANG></SLS_PRT_COM><GV_SYSID>C01</GV_SYSID><GV_DATE>2017-08-04</GV_DATE><VBTYP></VBTYP><ZS_EXTRADATA><EIKTO></EIKTO><SALESDOCTYPE></SALESDOCTYPE><DOCLANGUAGE></DOCLANGUAGE><VTWEG></VTWEG><SPART></SPART></ZS_EXTRADATA><USERNAME>MARFIL</USERNAME></data>';
    	
    	SAPQuoteXmlParser parser = new SAPQuoteXmlParser(xmlString);
    	
    	Test.startTest();
    	
    	SAPQuoteXmlParser.SAPQuoteDocument quoteDoc = parser.parse();
    	
    	Test.stopTest();
    	
    	System.assertEquals('EUR', quoteDoc.currencyISOCode);
    	System.assertEquals(9000, quoteDoc.value);
    	System.assertEquals(10710, quoteDoc.grossValue);
    	System.assertNotEquals(null, quoteDoc.lineItems);
    	System.assertEquals(3, quoteDoc.lineItems.size());
    	System.assertNotEquals(null, quoteDoc.headerConditions);
    	System.assertEquals(2, quoteDoc.headerConditions.size());
    	
    	// line items
    	System.assertEquals(10, quoteDoc.lineItems[0].lineNumber);
    	System.assertEquals('3258285CBC', quoteDoc.lineItems[0].materialNumber);
    	System.assertEquals('N 80V 6PZS840 BAT CHRG RAL9005', quoteDoc.lineItems[0].materialDescription);
    	System.assertEquals(1, quoteDoc.lineItems[0].quantity);
    	System.assertEquals('PC', quoteDoc.lineItems[0].priceUnit);
    	System.assertEquals(8788.19, quoteDoc.lineItems[0].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[0].currencyISOCode);
    	System.assertEquals(8788.19, quoteDoc.lineItems[0].value);
    	System.assertEquals('9936_50443_00_H', quoteDoc.lineItems[0].drawingNo);
    	System.assertEquals('1.025 mm x 996 mm x 767 mm', quoteDoc.lineItems[0].dimensions);
    	System.assertEquals(0, quoteDoc.lineItems[0].itemText.size());
    	System.assertEquals(null, quoteDoc.lineItems[0].shipToParty);
    	System.assertEquals(true, quoteDoc.lineItems[0].hasConfiguration);
    	System.assertEquals(false, quoteDoc.lineItems[0].hasItemText);
    	System.assertNotEquals(null, quoteDoc.lineItems[0].configuration);
    	System.assertEquals(26, quoteDoc.lineItems[0].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[0].conditions.size());
    	System.assertEquals(0, quoteDoc.lineItems[0].conditions.size());
    	System.assertEquals(8788.19, quoteDoc.lineItems[0].netValue);
    	
		System.assertEquals(20, quoteDoc.lineItems[1].lineNumber);
    	System.assertEquals('2324419', quoteDoc.lineItems[1].materialNumber);
    	System.assertEquals('LABOUR COSTS/TRACTION', quoteDoc.lineItems[1].materialDescription);
    	System.assertEquals(17, quoteDoc.lineItems[1].quantity);
    	System.assertEquals('PC', quoteDoc.lineItems[1].priceUnit);
    	System.assertEquals(7.44352941176470588235294117647059, quoteDoc.lineItems[1].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[1].currencyISOCode);
    	System.assertEquals(126.54, quoteDoc.lineItems[1].value);
    	System.assertEquals('', quoteDoc.lineItems[1].drawingNo);
    	System.assertEquals('', quoteDoc.lineItems[1].dimensions);
    	System.assertEquals(0, quoteDoc.lineItems[1].itemText.size());
    	System.assertEquals(null, quoteDoc.lineItems[1].shipToParty);
    	
    	System.assertNotEquals(null, quoteDoc.lineItems[1].configuration);
    	System.assertEquals(0, quoteDoc.lineItems[1].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[1].conditions.size());
    	System.assertEquals(0, quoteDoc.lineItems[1].conditions.size());
    	
    	System.assertEquals(30, quoteDoc.lineItems[2].lineNumber);
    	System.assertEquals('1024328', quoteDoc.lineItems[2].materialNumber);
    	System.assertEquals('Plug    BFS III  HAWKER    without float', quoteDoc.lineItems[2].materialDescription);
    	System.assertEquals(6, quoteDoc.lineItems[2].quantity);
    	System.assertEquals('PC', quoteDoc.lineItems[2].priceUnit);
    	System.assertEquals(14.2116666666666666666666666666667, quoteDoc.lineItems[2].amount);
    	System.assertEquals('EUR', quoteDoc.lineItems[2].currencyISOCode);
    	System.assertEquals(85.27, quoteDoc.lineItems[2].value);
    	System.assertEquals('', quoteDoc.lineItems[2].drawingNo);
    	System.assertEquals('', quoteDoc.lineItems[2].dimensions);
    	System.assertEquals(1, quoteDoc.lineItems[2].itemText.size());
    	System.assertEquals(null, quoteDoc.lineItems[2].shipToParty);
    	
    	System.assertNotEquals(null, quoteDoc.lineItems[2].configuration);
    	System.assertEquals(0, quoteDoc.lineItems[2].configuration.size());
    	System.assertNotEquals(null, quoteDoc.lineItems[2].conditions.size());
    	System.assertEquals(0, quoteDoc.lineItems[2].conditions.size());
    	
    	
    	// header conditions
    	System.assertEquals('Order value', quoteDoc.headerConditions[0].name);
    	System.assertEquals(0, quoteDoc.headerConditions[0].baseAmount);
    	System.assertEquals(0, quoteDoc.headerConditions[0].rate);
    	System.assertEquals('', quoteDoc.headerConditions[0].unit);
    	System.assertEquals(9000, quoteDoc.headerConditions[0].amount);
    	
    	System.assertEquals('VAT', quoteDoc.headerConditions[1].name);
    	System.assertEquals(9000, quoteDoc.headerConditions[1].baseAmount);
    	System.assertEquals(19, quoteDoc.headerConditions[1].rate);
    	System.assertEquals('%', quoteDoc.headerConditions[1].unit);
    	System.assertEquals(1710, quoteDoc.headerConditions[1].amount);
    }
}